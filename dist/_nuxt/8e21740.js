(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{487:function(e,t,o){var content=o(511);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(17).default)("620f086a",content,!0,{sourceMap:!1})},510:function(e,t,o){"use strict";o(487)},511:function(e,t,o){var r=o(16)(!1);r.push([e.i,".myClass[data-v-79540294],.router[data-v-79540294]{color:snow}.myClass[data-v-79540294]{background:#1e1e1e}.classInput[data-v-79540294],.update[data-v-79540294]{color:snow;border-color:#fafafa;border-style:solid}",""]),e.exports=r},540:function(e,t,o){"use strict";o.r(t);var r=o(15),n=(o(8),o(30),o(97),o(24),o(7),o(68),o(79)),l=o.n(n),d={data:function(){return{folderName:"",dialogAddFolder:!1,user:null,allFolders:[],folderList:[],dialogDeleteFolder:!1,dialogSuccess:!1,auxFolder:"",dialogRenameFolder:!1,lookup:"",updatedFolder:"",items:[],dialogMoveDepartment:!1,selectedDepartment:"",current:"",allDepartments:[],admin:!1}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllFolders();case 2:case"end":return t.stop()}}),t)})))()},computed:{filteredFolders:function(){var e=this;return this.folderList.filter((function(t){return t.name.match(e.lookup)}))}},watch:{dialogAddFolder:function(e){e||this.closeAddFolder()},dialogMoveDepartment:function(e){e||this.closeEdit()},dialogSuccess:function(e){e||this.close()},dialogDeleteFolder:function(e){e||this.closeDeleteFolder()},dialogRenameFolder:function(e){e||this.closeRenameFolder()}},mounted:function(){this.getUser(),"CEO"===this.$auth.user.role.name&&(this.isCeo=!0),localStorage.setItem("dep_id",this.$route.params.id)},methods:{getUser:function(){var e=this;l.a.get("http://212.227.210.204:8765/user",{headers:{Authorization:this.$auth.getToken("local")}}).then((function(t){e.user=t.data,"CEO"!==e.user.role.name&&"ADMIN"!==e.user.role.name||(e.admin=!0),e.getAllFolders()})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log("Method get user error: "+t),console.log("Method get user stringified errors: "+JSON.stringify(t.data.errors))}))},getAllFolders:function(){var e=this,t="";"CEO"===this.user.role.name&&(t="http://212.227.210.204:8765/ceo/folders/"+this.user.employee.department.city.id),"ADMIN"===this.user.role.name&&(t="http://212.227.210.204:8765/admin/folders"),"DEPARTMENT"===this.user.role.name&&(t="http://212.227.210.204:8765/department/folders"),l()({url:t,method:"GET",headers:{Authorization:this.$auth.getToken("local")}}).then((function(t){e.allFolders=t.data,e.allFolders.forEach((function(t){t.department.id===parseInt(e.$route.params.id)&&e.folderList.push(t)}))})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},deleteFolder:function(e){this.dialogDeleteFolder=!0,this.deletedFolder=e},closeDeleteFolder:function(){this.dialogDeleteFolder=!1},deleteFolderConfirm:function(){var e=this;l()({url:"http://212.227.210.204:8765/delete_folder/"+this.deletedFolder,method:"DELETE",headers:{Authorization:this.$auth.getToken("local")}}).then((function(t){e.dialogSuccess=!0,e.dialogDeleteFolder=!1})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},renameFolder:function(e){this.dialogRenameFolder=!0,this.updatedFolder=e.name,this.auxFolder=e},closeRenameFolder:function(){this.dialogRenameFolder=!1,this.updatedFolder=""},renameFolderConfirm:function(){var e=this;this.formData=new FormData,this.formData.append("id",this.auxFolder.id),this.formData.append("name",this.updatedFolder),this.formData.append("dep_id",this.auxFolder.department.id),l()({url:"http://212.227.210.204:8765/update_base_folder",method:"PUT",data:this.formData,headers:{Authorization:this.$auth.getToken("local"),"Content-Type":"multipart/form-data"}}).then((function(t){e.dialogSuccess=!0,e.updatedFolder="",e.dialogRenameFolder=!1,window.location.reload()})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},close:function(e){this.dialogSuccess=!1,window.location.reload()},getCities:function(){var e=this;l.a.get("http://212.227.210.204:8765/cities",{headers:{Authorization:this.$auth.getToken("local")}}).then((function(t){e.cities=t.data})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},moveFolder:function(e){var t=this;this.current=e;var o="";"CEO"===this.user.role.name&&(o="http://212.227.210.204:8765/departments"),"ADMIN"===this.user.role.name&&(o="http://212.227.210.204:8765/departments/"+this.user.employee.department.city.id),l()({url:o,method:"GET",headers:{Authorization:this.$auth.getToken("local")}}).then((function(e){e.data.forEach((function(e){"CeoDepartment"!==e.name&&t.allDepartments.push(e)})),t.allDepartments.forEach((function(e){t.items.push(e.name+"   "+e.city.name)})),t.dialogMoveDepartment=!0})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},editDepartmentConfirmation:function(){var e=this,t=0;this.allDepartments.forEach((function(o){o.name+"   "+o.city.name===e.selectedDepartment&&(t=o.id)})),this.formData=new FormData,this.formData.append("id",this.current.id),this.formData.append("name",this.current.name),this.formData.append("dep_id",t),l()({url:"http://212.227.210.204:8765/update_base_folder",method:"PUT",data:this.formData,headers:{Authorization:this.$auth.getToken("local"),"Content-Type":"multipart/form-data"}}).then((function(t){e.dialogSuccess=!0,e.closeEdit()})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},closeEdit:function(){this.dialogMoveDepartment=!1,this.allDepartments=[],window.location.reload()},closeAddFolder:function(){this.dialogAddFolder=!1,this.folderName=""},addFolderConfirmation:function(){var e=this;this.formData=new FormData,this.formData.append("name",this.folderName),this.formData.append("dep_id",this.$route.params.id),l()({url:"http://212.227.210.204:8765/create_base_folder",method:"POST",data:this.formData,headers:{Authorization:this.$auth.getToken("local"),"Content-Type":"multipart/form-data"}}).then((function(t){e.dialogSuccess=!0,e.closeAddFolder()})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},createFolder:function(){this.dialogAddFolder=!0}}},c=(o(510),o(78)),m=o(96),v=o.n(m),h=o(231),f=o(455),_=o(454),F=o(468),D=o(453),k=o(475),w=o(460),x=o(155),y=o(196),C=o(467),A=o(57),$=o(512),S=o(451),N=o(64),component=Object(c.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.$fetchState.pending?o("v-container",[o("v-skeleton-loader",{attrs:{type:"card"}})],1):o("v-container",{staticClass:"mx-auto"},[o("v-form",{ref:"form"},[o("v-toolbar",{attrs:{color:"transparent",dark:""}},[o("v-container",[o("label",{staticClass:"title"},[e._v(e._s(e.$t("myFolders")))])]),e._v(" "),o("v-toolbar",{attrs:{id:"searchBar"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.lookup,expression:"lookup"}],staticClass:"Search",attrs:{type:"text",placeholder:e.$t("searchFolder")},domProps:{value:e.lookup},on:{input:function(t){t.target.composing||(e.lookup=t.target.value)}}})])],1),e._v(" "),o("hr"),e._v(" "),e._l(e.filteredFolders,(function(t){return o("v-list",{key:t.id,attrs:{id:"folderList"}},[o("v-row",[o("v-col",{staticClass:"text-left"},[o("router-link",{staticClass:"router",attrs:{to:"/folder/"+t.id}},[o("v-icon",{staticClass:"grey lighten-1",attrs:{dark:""}},[e._v("\n              mdi-folder\n            ")])],1),e._v(" "),o("label",{domProps:{textContent:e._s(t.name)}})],1),e._v(" "),o("v-col",{staticClass:"text-right"},[e.admin?o("v-btn",{on:{click:function(o){return e.moveFolder(t)}}},[o("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n              mdi-folder-move\n            ")])],1):e._e(),e._v(" "),o("v-btn",{on:{click:function(o){return e.deleteFolder(t.id)}}},[o("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n              mdi-delete\n            ")])],1),e._v(" "),o("v-btn",{on:{click:function(o){return e.renameFolder(t)}}},[o("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n              mdi-rename-box\n            ")])],1)],1)],1)],1)})),e._v(" "),o("hr"),e._v(" "),o("v-btn",{staticClass:"myClass",on:{click:e.createFolder}},[e._v("\n      "+e._s(e.$t("createFolder"))+"\n    ")]),e._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("\n          "+e._s(e.$t("success"))+"\n        ")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n            "+e._s(e.$t("close"))+"\n          ")]),e._v(" "),o("v-spacer")],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDeleteFolder,callback:function(t){e.dialogDeleteFolder=t},expression:"dialogDeleteFolder"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("\n          "+e._s(e.$t("areYouSureYouWantToDeleteIt"))+"\n        ")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDeleteFolder}},[e._v("\n            "+e._s(e.$t("cancel"))+"\n          ")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteFolderConfirm}},[e._v("\n            OK\n          ")]),e._v(" "),o("v-spacer")],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogRenameFolder,callback:function(t){e.dialogRenameFolder=t},expression:"dialogRenameFolder"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("\n          "+e._s(e.$t("renameFolder"))+"\n        ")]),e._v(" "),o("v-card-text",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedFolder,expression:"updatedFolder"}],staticClass:"update",staticStyle:{color:"white"},attrs:{type:"text",placeholder:e.$t("folderName")},domProps:{value:e.updatedFolder},on:{input:function(t){t.target.composing||(e.updatedFolder=t.target.value)}}})]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeRenameFolder}},[e._v("\n            "+e._s(e.$t("cancel"))+"\n          ")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.renameFolderConfirm}},[e._v("\n            OK\n          ")]),e._v(" "),o("v-spacer")],1)],1)],1),e._v(" "),e.admin?o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogMoveDepartment,callback:function(t){e.dialogMoveDepartment=t},expression:"dialogMoveDepartment"}},[o("v-form",{ref:"formMoveDepartment"},[o("v-card",[o("v-card-text",[o("v-container",[o("v-row",[o("v-col",[o("v-select",{attrs:{items:e.items,rules:[function(e){return!!e||"Item is required"}],label:e.$t("department"),required:""},model:{value:e.selectedDepartment,callback:function(t){e.selectedDepartment=t},expression:"selectedDepartment"}})],1)],1)],1)],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEdit}},[e._v("\n              "+e._s(e.$t("cancel"))+"\n            ")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.editDepartmentConfirmation}},[e._v("\n              OK\n            ")]),e._v(" "),o("v-spacer")],1)],1)],1)],1):e._e(),e._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogAddFolder,callback:function(t){e.dialogAddFolder=t},expression:"dialogAddFolder"}},[o("v-form",{ref:"formAddFolder"},[o("v-card",[o("v-card-text",[o("v-container",[o("v-row",[o("v-col",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.folderName,expression:"folderName"}],staticClass:"classInput",attrs:{type:"text",placeholder:e.$t("folderName")},domProps:{value:e.folderName},on:{input:function(t){t.target.composing||(e.folderName=t.target.value)}}})])],1)],1)],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeAddFolder}},[e._v("\n              "+e._s(e.$t("cancel"))+"\n            ")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addFolderConfirmation}},[e._v("\n              OK\n            ")]),e._v(" "),o("v-spacer")],1)],1)],1)],1)],2)],1)}),[],!1,null,"79540294",null);t.default=component.exports;v()(component,{VBtn:h.a,VCard:f.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VCol:F.a,VContainer:D.a,VDialog:k.a,VForm:w.a,VIcon:x.a,VList:y.a,VRow:C.a,VSelect:A.a,VSkeletonLoader:$.a,VSpacer:S.a,VToolbar:N.a})}}]);