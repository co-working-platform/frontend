(window.webpackJsonp=window.webpackJsonp||[]).push([[48,20],{518:function(e,t,o){"use strict";o.r(t);o(8),o(30),o(97),o(24),o(7),o(51);var l=o(79),n=o.n(l),r={data:function(){return{fileList:[],lookup:"",dialogDelete:!1,dialogSuccess:!1,url_to_delete:"",notEmployee:!1}},computed:{filteredFiles:function(){var e=this;return this.fileList.filter((function(t){return t.name.match(e.lookup)}))}},watch:{dialogDelete:function(e){e||this.closeDelete()},dialogSuccess:function(e){e||this.closeSuccess()}},mounted:function(){this.getAllFiles(),this.checkUser()},methods:{checkUser:function(){var e=this;n.a.get("http://212.227.210.204:8765/user",{headers:{Authorization:this.$auth.getToken("local")}}).then((function(t){var o=t.data;"ADMIN"!==o.role.name&&"CEO"!==o.role.name&&"DEPARTMENT"!==o.role.name||(e.notEmployee=!0)})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},closeSuccess:function(){this.dialogDelete=!1,this.dialogSuccess=!1},closeDelete:function(){this.dialogDelete=!1,this.getAllFiles()},downloadFile:function(e,title){var link=document.createElement("a");link.href=e,link.setAttribute("download",title),document.body.appendChild(link),link.click()},getAllFiles:function(){var e=this;n.a.get("http://212.227.210.204:8765/files/"+this.$route.params.id,{headers:{Authorization:this.$auth.getToken("local")}}).then((function(t){!0===e.notEmployee?e.fileList=t.data:t.data.forEach((function(t){!0===t.available&&e.fileList.push(t)}))})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},deleteItemConfirm:function(){var e=this,t=this.url_to_delete.split("http://212.227.210.204:8765/file/")[1];n()({url:"http://212.227.210.204:8765/delete_file/"+t,method:"DELETE",headers:{Authorization:this.$auth.getToken("local")}}).then((function(t){e.closeDelete(),e.dialogSuccess=!0})).catch((function(e){window.alert("An error occurred. Please try again!");var t=e.response;console.log(JSON.stringify(t.data.errors))}))},deleteFile:function(e,t){this.url_to_delete=e,this.dialogDelete=!0}}},c=o(78),d=o(96),v=o.n(d),h=o(231),f=o(455),m=o(454),_=o(468),C=o(453),k=o(475),w=o(460),y=o(155),x=o(196),E=o(467),S=o(451),D=o(64),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",{staticClass:"mx-auto"},[o("v-form",{ref:"form"},[o("v-toolbar",{attrs:{color:"transparent",dark:""}},[o("v-container",[o("label",{staticClass:"title"},[e._v("My files")])]),e._v(" "),o("v-toolbar",{attrs:{id:"searchBar"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.lookup,expression:"lookup"}],staticClass:"Search",attrs:{type:"text",placeholder:"Search folder"},domProps:{value:e.lookup},on:{input:function(t){t.target.composing||(e.lookup=t.target.value)}}})])],1),e._v(" "),e._l(e.filteredFiles,(function(t){return o("v-list",{key:t.id},[o("v-container",[o("v-row",[o("v-col",{attrs:{"align-self":"center"}},[o("label",{domProps:{textContent:e._s(t.name)}})]),e._v(" "),o("v-col",{staticClass:"text-left"},[o("v-container",[o("v-row",[o("label",{staticClass:"title",domProps:{textContent:e._s(t.user.employee.name)}})]),e._v(" "),o("v-row",[o("label",{staticClass:"subTitle",domProps:{textContent:e._s(t.user.username)}})])],1)],1),e._v(" "),o("v-col",{staticClass:"text-right",attrs:{"align-self":"center"}},[o("v-btn",{on:{click:function(o){return e.downloadFile(t.url,t.name)}}},[o("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n                mdi-download\n              ")])],1),e._v(" "),e.notEmployee?o("v-btn",{on:{click:function(o){return e.deleteFile(t.url,t.name)}}},[o("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("\n                mdi-delete\n              ")])],1):e._e()],1)],1)],1)],1)})),e._v(" "),o("v-btn",[o("router-link",{staticClass:"router",attrs:{to:"/uploadFileEmployee/"+e.$route.params.id}},[e._v("\n        Upload file\n      ")])],1),e._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("\n          Are you sure you want to delete this file?\n        ")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("\n            Cancel\n          ")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("\n            OK\n          ")]),e._v(" "),o("v-spacer")],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogSuccess,callback:function(t){e.dialogSuccess=t},expression:"dialogSuccess"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("\n          Success!\n        ")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeSuccess}},[e._v("\n            Close\n          ")]),e._v(" "),o("v-spacer")],1)],1)],1)],2)],1)}),[],!1,null,"37d5d62c",null);t.default=component.exports;v()(component,{VBtn:h.a,VCard:f.a,VCardActions:m.a,VCardTitle:m.c,VCol:_.a,VContainer:C.a,VDialog:k.a,VForm:w.a,VIcon:y.a,VList:x.a,VRow:E.a,VSpacer:S.a,VToolbar:D.a})},631:function(e,t,o){"use strict";o.r(t);var l={components:{EmployeeFolderComponent:o(518).default},mounted:function(){!1===this.$auth.loggedIn&&(window.location="/login")}},n=o(78),r=o(96),c=o.n(r),d=o(453),component=Object(n.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",[t("EmployeeFolderComponent")],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{EmployeeFolderComponent:o(518).default}),c()(component,{VContainer:d.a})}}]);